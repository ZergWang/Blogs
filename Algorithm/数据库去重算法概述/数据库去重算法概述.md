# 布隆过滤器

布隆过滤器（Bloom Filter），


无偏hash函数。

综合分析：
- 时间复杂度：

- 空间复杂度：

- 优点：
- 
- 缺点：近似去重。在执行distinct后的确不会出现重复元素，但有可能遗漏元素。


<br/><br/>

# HyperLogLog


用于去重计数，统计表中互不相同的元素的个数（即count distinct）。

### 算法步骤

首先需要一个哈希函数H，满足：（1）H的结果几乎是均匀分布的；（2）H的哈希结果长度固定。然后对每条数据进行哈希运算，得到等长（假设长度为L）的二进制哈希值。同时进行分桶操作，将哈希空间平均分成$2^p=m$份，也就是有m个桶，哈希值的前p位用于桶的标志，不同的哈希值，只要它们的前p位相同，则会分到同一个桶里。

其次，对每个桶中的所有哈希值，获得其剩余的L-p位中首个“1”出现的位置，并将所有的位置信息中最靠后的位置记录下来（假设为$p_i$ ,其中$0 \leq i<m$）。

再次，对这m个桶记录的位置信息求调和平均数。

复次

### 综合分析
时间复杂度：$O(N)$，N为数据量。

空间复杂度：$O(m \times log_2 \times log_2 N)$，m为桶数量，N为数据量。
  
优点：极度节省内存空间。算法效率也非常高。

缺点：近似计数。算法得到的计数结果为近似值。且只能进行去重后的计数，无法获知去重数据的具体信息。

### 误差分析
HyperLogLog算法得到的结果，其误差近似于正态分布，$\sigma = 1.04/\sqrt(m)$。也就是说，结果有68.26%的概率与正确值的偏差小于$\sigma$，有95.45%的概率与正确值的偏差小于$2\sigma$，有99.73%的概率与正确值的偏差小于$3\sigma$。误差可由用户自己控制，当内存空间扩大到原来的4倍，误差降低为原来的2倍。

假设有$2^{32}$条，即大约40亿条数据，当取$m=10^6$时，占用空间仅$\frac{10^6 \times log_2 \times log_2 2^{32}}{8 \times 1024} \approx 610 $ KB，结果有68.26\%的概率与正确值的偏差小于0.1\%，有99.73\%的概率与正确值的偏差小于0.3\%。若仅要求$\sigma$在1\%内，则算法仅需6KB的内存空间。

<br/><br/>
# Roaring BitMap

<br/><br/>

# 前缀树（Trie Tree）

<br/><br/>

# 参考资料

[布隆(Bloom Filter)过滤器——全面讲解，建议收藏](https://blog.csdn.net/qq_41125219/article/details/119982158)

[大数据分析常用去重算法分析『HyperLogLog 篇』](https://blog.csdn.net/weixin_39074599/article/details/89971868)

[HyperLogLog](https://www.yuque.com/abser/aboutme/nfx0a4)